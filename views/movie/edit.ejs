<%- include('../layouts/header') %>
<%- include('../layouts/navbar') %>

<div class="page-content">
    <div class="container-fluid">

        <!-- start page title -->
        <div class="page-title-box">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h6 class="page-title">Movie</h6>
                    <ol class="breadcrumb m-0">
                        <li class="breadcrumb-item"><a href="#">Movie</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Edit Movie</li>
                    </ol>
                </div>
                <div class="col-md-4">
                    <div class="float-end d-none d-md-block">
                        <div class="dropdown">
                            <a class="btn btn-primary mb-5 waves-effect waves-light" href="#" onclick="history.go(-1);"> Go Back</a>
                            </button></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end page title -->

        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">

                        <h4>Edit Movie </h4>

                        <form class="mt-4 custom-validation" action="/updateMovie" id="movie"  method="POST"  >
                            <p class="mb-0">
                                <div class="col-md-12">
                                    <div class="row">
                                        <input type="hidden" id="movie" name="id" value="<%= movie._id %>">

                                        <div class="form-row col-md-6 col-sm-6" >
                                            <label for="first_name" class="col-xs-2 col-form-label">Movie Name</label>
                                            <input type="text" class="form-control" id="name" required name="name"  value="<%= movie.name %>" autocomplete="off">
                                        </div>
                                        <div class="form-row col-md-6 col-sm-6" >
                                            <label for="genre" class="col-xs-2 col-form-label"> Genre</label>
                                            <input type="text" class="form-control" id="genre" required name="genre"  value="<%= movie.genre %>" autocomplete="off">
                                        </div>
                                        <div class="form-row col-md-6 col-sm-6" >
                                            <label for="movieCast" class="col-xs-2 col-form-label movieCast">Cast</label>
                                            <div id="cast">
                                                <% movie.cast.forEach((value, index) => { %>
                                                    <span class="castspan">
                                                    <input type="text" class="form-control cast"  required name="cast[]"  value="<%= value %>" autocomplete="off">
                                                    <span class="deleteinput"><i class="fa fa-trash"></i></span>
                                                    <br>
                                                </span>
                                                <% }) %>
                                            </div>
                                            <br>
                                            <div class="input-group-btn">   
                                                <button class="btn btn-success bs-add-button" id="add" type="button"><i class="fa fa-plus">Add Cast</i></button>  
                                            </div>

                                        </div>
                                        <div class="form-row col-md-6 col-sm-6" >
                                            <label for="releaseDate" class="col-xs-2 col-form-label">Release Date</label>
                                            <input type="date" class="form-control" id="releaseDate" required name="releaseDate"  value="<%= moment(movie.releaseDate).format('YYYY-MM-DD') %>" autocomplete="off">
                                        </div>
                                        
                                        <div class="form-row col-md-6 col-sm-6" >
                                            <label for="delete" class="col-xs-2 col-form-label">Rating</label>
                                            <input type="number" class="form-control" id="rating" required name="rating" min="1" max="5" value="<%= movie.rating %>" autocomplete="off">
                                        </div>
                                       
                                    </div>

                                   
                                        
                                    

                                    </div>
                                   
                                    <button class="btn btn-success nextBtn btn-lg mt-3" type="submit">Submit</button>
                                
                                
                            </p>
                        </form>
                      
                    </div>
                </div>
            </div> <!-- end col -->
        </div> <!-- end row -->

    </div> <!-- container-fluid -->
</div>
<script  type='text/javascript'></script>
<script>
$(document).ready(function(){
    $('#add').click(function(){
    $('#cast').append('<br><span class="castspan"><input type="text" class="form-control cast" id="cast"  name="cast[]"  value=""><span class="deleteinput"><i class="fa fa-trash"></i></span></span>');
    
  });

  $(document).on('click', '.deleteinput', function(){
    $(this).closest('.castspan').remove();
  });
})
</script>



<!-- End Page-content -->
<%- include('../layouts/footer') %>